(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-details"],{"2c64":function(e,t,r){},"3d86":function(e,t,r){},"7c87":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("page-header",{attrs:{msg:"User Details"}}),r("v-card",{staticClass:"mx-auto mt-5",attrs:{width:"480"}},[r("v-card-title",[e._v(" id: "+e._s(e.currentUser.id)+" ")]),r("v-card-text",[r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-text-field",{attrs:{type:"text",label:"User Name","prepend-icon":"mdi-account-circle",disabled:e.isRootUser},model:{value:e.currentUser.displayName,callback:function(t){e.$set(e.currentUser,"displayName",t)},expression:"currentUser.displayName"}}),r("v-text-field",{attrs:{type:"email",label:"User Email","prepend-icon":"mdi-email",disabled:e.isRootUser,rules:[e.rules.required,e.rules.email],required:""},model:{value:e.currentUser.email,callback:function(t){e.$set(e.currentUser,"email",t)},expression:"currentUser.email"}}),r("v-radio-group",{attrs:{"prepend-icon":"mdi-account-cog",row:"",rules:[e.rules.required],disabled:e.isLoggedUser||e.isRootUser},model:{value:e.currentUser.role,callback:function(t){e.$set(e.currentUser,"role",t)},expression:"currentUser.role"}},[r("v-spacer"),r("v-radio",{attrs:{label:"Admin",value:"admin"}}),r("v-radio",{attrs:{label:"Manager",value:"manager"}}),r("v-radio",{attrs:{label:"Registered User",value:"user"}})],1),e.isLoggedUser?r("v-btn",{attrs:{block:"",small:""},on:{click:e.onChangePasswordRquest}},[e._v(" Request Password Change "),r("v-icon",{attrs:{right:"",dark:""}},[e._v(" mdi-cloud-upload ")])],1):e.isNewUser?r("v-text-field",{attrs:{type:e.showPassword?"text":"password",label:"Password","prepend-icon":"mdi-lock","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",rules:[e.rules.pswdRequres,e.rules.pswdMinLength,e.rules.pswdUpper,e.rules.pswdNumber,e.rules.pswdSpecial],required:""},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.currentUser.password,callback:function(t){e.$set(e.currentUser,"password",t)},expression:"currentUser.password"}}):e._e()],1)],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),e.isRootUser?e._e():r("v-btn",{attrs:{color:"info"},on:{click:e.onSubmitDetails}},[e._v(e._s(e.submitButtonTitle)+" ")]),r("v-btn",{on:{click:e.navigateTo}},[e._v("Cancel")])],1)],1),r("page-footer")],1)},s=[],a=(r("7db0"),r("96cf"),r("1da1")),n=r("2579"),o=r("c633"),u={name:"UserDetails",components:{PageHeader:n["a"],PageFooter:o["a"]},created:function(){var e=this.$route.params.id;this.currentUser=this.getCurentUser(e),this.currentUser||(this.currentUser={id:"new"}),this.currentUser.password=""},data:function(){var e=this;return{currentUser:null,showPassword:!1,confirmPassword:"",rules:{required:function(e){return!!e||"Required."},pswdRequres:function(t){return"new"!==e.currentUser.id||!!t||"Required"},pswdMinLength:function(e){return!e||e&&e.length>=6||"Must have 5+ characters"},pswdUpper:function(e){return!e||/(?=.*[A-Z])/.test(e)||"Must have one uppercase character"},pswdNumber:function(e){return!e||/(?=.*\d)/.test(e)||"Must have one number"},pswdSpecial:function(e){return!e||/([!@$%])/.test(e)||"Must have one special character [!@#$%]"},email:function(e){var t=/^([a-zA-Z0-9_\-.]+)@([a-zA-Z0-9_\-.]+)\.([a-zA-Z]{2,5})$/;return t.test(e)||"Invalid e-mail"}}}},methods:{getCurentUser:function(e){return this.$store.getters.activeUsers.find((function(t){return t.id===e}))},onChangePasswordRquest:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.preventDefault(),r.prev=1,r.next=4,t.$store.dispatch("AUTH_CHANGE_PASSWORD_REQUEST",t.currentUser.email);case 4:i={variant:"primary",message:"INFO: Check your registered email to reset the password!"},r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),i={variant:"error",message:"ERROR: ".concat(r.t0.message)};case 10:t.$store.commit("UPDATE_SNACKBAR",i);case 11:case"end":return r.stop()}}),r,null,[[1,7]])})))()},onSubmitDetails:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var i,s,a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.preventDefault(),i=t.$refs.form.validate(),!i){r.next=17;break}return s="new"===t.currentUser.id?"CREATE_USER":"PATCH_USER",a={displayName:t.currentUser.displayName,email:t.currentUser.email,role:t.currentUser.role,password:t.currentUser.password},"new"!==t.currentUser.id&&(a.id=t.currentUser.id),r.prev=6,r.next=9,t.$store.dispatch(s,a);case 9:r.next=16;break;case 11:return r.prev=11,r.t0=r["catch"](6),n={variant:"error",message:"ERROR: ".concat(r.t0.message)},t.$store.commit("UPDATE_SNACKBAR",n),r.abrupt("return");case 16:t.navigateTo();case 17:case"end":return r.stop()}}),r,null,[[6,11]])})))()},navigateTo:function(){this.isLoggedUser&&this.isRegularUser?this.$router.push("/"):this.$router.go(-1)}},computed:{submitButtonTitle:function(){return"new"===this.currentUser.id?"Create":"Update"},isRegularUser:function(){return!!this.currentUser&&"user"===this.currentUser.role},isLoggedUser:function(){return!!this.currentUser&&this.currentUser.id===this.$store.getters.loggedUserId},isRootUser:function(){return!!this.currentUser&&"root.user@firebaseapp.com"===this.currentUser.email},isNewUser:function(){return!!this.currentUser&&"new"===this.currentUser.id.toLowerCase()}}},l=u,c=r("2877"),d=r("6544"),p=r.n(d),h=r("8336"),m=r("b0af"),v=r("99d9"),f=r("a523"),g=r("ce7e"),b=r("4bd4"),U=r("132d"),w=(r("b0c0"),r("5530")),C=(r("2c64"),r("ba87")),y=r("9d26"),R=r("c37a"),S=r("7e2b"),V=r("a9ad"),k=r("4e82"),A=r("5607"),$=r("2b0e"),x=$["a"].extend({name:"rippleable",directives:{ripple:A["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(e.staticClass="v-input--selection-controls__ripple",e.directives=e.directives||[],e.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",e)):null}}}),_=r("7560"),I=(r("4de4"),r("45fc"),r("d3b7"),r("25f0"),r("80d2")),D=$["a"].extend({name:"comparable",props:{valueComparator:{type:Function,default:I["h"]}}}),O=r("58df");function E(e){e.preventDefault()}var N=Object(O["a"])(R["a"],x,D).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data:function(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor:function(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple:function(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive:function(){var e=this,t=this.value,r=this.internalValue;return this.isMultiple?!!Array.isArray(r)&&r.some((function(r){return e.valueComparator(r,t)})):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,r):Boolean(r):this.valueComparator(r,this.trueValue)},isDirty:function(){return this.isActive},rippleState:function(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue:function(e){this.lazyValue=e,this.hasColor=e}},methods:{genLabel:function(){var e=R["a"].options.methods.genLabel.call(this);return e?(e.data.on={click:E},e):e},genInput:function(e,t){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:e,type:e},t),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:E},ref:"input"})},onBlur:function(){this.isFocused=!1},onClick:function(e){this.onChange(),this.$emit("click",e)},onChange:function(){var e=this;if(this.isInteractive){var t=this.value,r=this.internalValue;if(this.isMultiple){Array.isArray(r)||(r=[]);var i=r.length;r=r.filter((function(r){return!e.valueComparator(r,t)})),r.length===i&&r.push(t)}else r=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(r,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(r,t)?null:t:!r;this.validate(!0,r),this.internalValue=r,this.hasColor=r}},onFocus:function(){this.isFocused=!0},onKeydown:function(e){}}}),P=r("d9f7"),j=Object(O["a"])(S["a"],V["a"],x,Object(k["a"])("radioGroup"),_["a"]),L=j.extend().extend({name:"v-radio",inheritAttrs:!1,props:{disabled:Boolean,id:String,label:String,name:String,offIcon:{type:String,default:"$radioOff"},onIcon:{type:String,default:"$radioOn"},readonly:Boolean,value:{default:null}},data:function(){return{isFocused:!1}},computed:{classes:function(){return Object(w["a"])(Object(w["a"])({"v-radio--is-disabled":this.isDisabled,"v-radio--is-focused":this.isFocused},this.themeClasses),this.groupClasses)},computedColor:function(){return N.options.computed.computedColor.call(this)},computedIcon:function(){return this.isActive?this.onIcon:this.offIcon},computedId:function(){return R["a"].options.computed.computedId.call(this)},hasLabel:R["a"].options.computed.hasLabel,hasState:function(){return(this.radioGroup||{}).hasState},isDisabled:function(){return this.disabled||!!this.radioGroup&&this.radioGroup.isDisabled},isReadonly:function(){return this.readonly||!!this.radioGroup&&this.radioGroup.isReadonly},computedName:function(){return this.name||!this.radioGroup?this.name:this.radioGroup.name||"radio-".concat(this.radioGroup._uid)},rippleState:function(){return N.options.computed.rippleState.call(this)},validationState:function(){return(this.radioGroup||{}).validationState||this.computedColor}},methods:{genInput:function(e){return N.options.methods.genInput.call(this,"radio",e)},genLabel:function(){return this.hasLabel?this.$createElement(C["a"],{on:{click:E},attrs:{for:this.computedId},props:{color:this.validationState,focused:this.hasState}},Object(I["l"])(this,"label")||this.label):null},genRadio:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(y["a"],this.setTextColor(this.validationState,{props:{dense:this.radioGroup&&this.radioGroup.dense}}),this.computedIcon),this.genInput(Object(w["a"])({name:this.computedName,value:this.value},this.attrs$)),this.genRipple(this.setTextColor(this.rippleState))])},onFocus:function(e){this.isFocused=!0,this.$emit("focus",e)},onBlur:function(e){this.isFocused=!1,this.$emit("blur",e)},onChange:function(){this.isDisabled||this.isReadonly||this.isActive||this.toggle()},onKeydown:function(){}},render:function(e){var t={staticClass:"v-radio",class:this.classes,on:Object(P["b"])({click:this.onChange},this.listeners$)};return e("div",t,[this.genRadio(),this.genLabel()])}}),T=(r("a9e3"),r("ec29"),r("3d86"),r("604c")),B=Object(O["a"])(D,T["a"],R["a"]),G=B.extend({name:"v-radio-group",provide:function(){return{radioGroup:this}},props:{column:{type:Boolean,default:!0},height:{type:[Number,String],default:"auto"},name:String,row:Boolean,value:null},computed:{classes:function(){return Object(w["a"])(Object(w["a"])({},R["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--radio-group":!0,"v-input--radio-group--column":this.column&&!this.row,"v-input--radio-group--row":this.row})}},methods:{genDefaultSlot:function(){return this.$createElement("div",{staticClass:"v-input--radio-group__input",attrs:{id:this.id,role:"radiogroup","aria-labelledby":this.computedId}},R["a"].options.methods.genDefaultSlot.call(this))},genInputSlot:function(){var e=R["a"].options.methods.genInputSlot.call(this);return delete e.data.on.click,e},genLabel:function(){var e=R["a"].options.methods.genLabel.call(this);return e?(e.data.attrs.id=this.computedId,delete e.data.attrs.for,e.tag="legend",e):null},onClick:T["a"].options.methods.onClick}}),F=r("2fa4"),q=r("8654"),M=Object(c["a"])(l,i,s,!1,null,null,null);t["default"]=M.exports;p()(M,{VBtn:h["a"],VCard:m["a"],VCardActions:v["a"],VCardText:v["c"],VCardTitle:v["d"],VContainer:f["a"],VDivider:g["a"],VForm:b["a"],VIcon:U["a"],VRadio:L,VRadioGroup:G,VSpacer:F["a"],VTextField:q["a"]})},ec29:function(e,t,r){}}]);
//# sourceMappingURL=user-details.8c2e85fc.js.map