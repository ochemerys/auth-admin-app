(function(e){function t(t){for(var r,a,i=t[0],u=t[1],c=t[2],l=0,d=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&d.push(s[a][0]),s[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);m&&m(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==s[i]&&(r=!1)}r&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},s={app:0},o=[];function i(e){return u.p+"js/"+({about:"about"}[e]||e)+"."+{"chunk-24944874":"a61561a2",about:"bfc69ce7","chunk-35a491e0":"98eb94a8","chunk-2d0e5e97":"51b2e4a7","chunk-2d215fa4":"9d56261b","chunk-f933effe":"bf9b2d12"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-24944874":1,"chunk-35a491e0":1,"chunk-f933effe":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({about:"about"}[e]||e)+"."+{"chunk-24944874":"b25eb6dc",about:"31d6cfe0","chunk-35a491e0":"bd17ada6","chunk-2d0e5e97":"31d6cfe0","chunk-2d215fa4":"31d6cfe0","chunk-f933effe":"601d8c98"}[e]+".css",s=u.p+r,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var c=o[i],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===r||l===s))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){c=d[i],l=c.getAttribute("data-href");if(l===r||l===s)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var r=t&&t.target&&t.target.src||s,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete a[e],m.parentNode.removeChild(m),n(o)},m.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){a[e]=0})));var r=s[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,n){r=s[e]=[t,n]}));t.push(r[2]=o);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e);var d=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(m);var n=s[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}s[e]=void 0}};var m=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/auth-admin-app/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var m=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2579:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-sheet",{attrs:{height:e.sheetProps.hight}},[n("v-container",{staticClass:"fill-height"},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("h1",{staticClass:"text-center",class:e.sheetProps.display},[e._v(e._s(e.msg))])])],1)],1)},a=[],s=(n("b0c0"),{name:"PageHeader",props:{msg:String},computed:{sheetProps:function(){switch(this.$vuetify.breakpoint.name){case"xs":return{display:"display-1",height:"100px"};case"sm":return{display:"display-2",height:"200px"};case"md":return{display:"display-2",height:"200px"};case"lg":return{display:"display-2",height:"200px"};case"xl":return{display:"display-3",height:"250px"};default:return{display:"display-2",height:"200px"}}}}}),o=s,i=n("2877"),u=n("6544"),c=n.n(u),l=n("a523"),d=n("0fd9"),m=n("8dd9"),p=Object(i["a"])(o,r,a,!1,null,null,null);t["a"]=p.exports;c()(p,{VContainer:l["a"],VRow:d["a"],VSheet:m["a"]})},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("top-nav-bar"),n("v-main",[n("router-view")],1),n("app-snacbar")],1)},s=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-app-bar",[n("v-toolbar-title",[n("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:"/",tag:"span"}},[e._v(" User Management ")])],1),n("v-spacer"),n("v-toolbar-items",{staticClass:"hidden-xs-only"},[e.menuItems[0].isVisible?n("v-btn",{attrs:{to:e.menuItems[0].path,text:""}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-"+e._s(e.menuItems[0].icon))]),e._v(" "+e._s(e.menuItems[0].title)+" ")],1):e._e()],1),n("v-spacer"),n("v-toolbar-items",{staticClass:"hidden-xs-only"},[e.menuItems[1].isVisible?n("v-btn",{attrs:{to:e.menuItems[1].path,text:""}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-"+e._s(e.menuItems[1].icon))]),e._v(" "+e._s(e.menuItems[1].title)+" ")],1):e._e(),e.menuItems[2].isVisible?n("v-btn",{attrs:{to:e.menuItems[2].path,text:""}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-"+e._s(e.menuItems[2].icon))]),e._v(" "+e._s(e.menuItems[2].title)+" ")],1):e._e(),e.menuItems[3].isVisible?n("v-btn",{attrs:{to:e.menuItems[3].path,text:""}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-"+e._s(e.menuItems[3].icon))]),e._v(" "+e._s(e.menuItems[3].title)+" ")],1):e._e()],1),n("span",{staticClass:"hidden-sm-and-up"},[n("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!e.drawer}}})],1)],1),n("v-navigation-drawer",{attrs:{absolute:"",temporary:"",right:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{dense:""}},e._l(e.visibleMenuItems,(function(t){return n("v-list-item",{key:t.title,attrs:{link:"",to:t.path}},[n("v-list-item-icon",[n("v-icon",{attrs:{small:""}},[e._v("mdi-"+e._s(t.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.title))])],1)],1)})),1)],1)],1)},i=[],u=(n("4de4"),{name:"TopNavBar",created:function(){this.menuItems=this.getMenuItems()},data:function(){return{drawer:!1,menuItems:[]}},methods:{getMenuItems:function(){return[{title:"Dashboard",path:"/dashboard",icon:"account-supervisor",isVisible:this.isLoggedIn&&this.isUserAdmin},{title:this.loggedUserName,path:"/profile/".concat(this.loggedUserId),icon:"account-edit",isVisible:this.isLoggedIn},{title:"Login",path:"/login",icon:"lock-open",isVisible:!this.isLoggedIn},{title:"Logout",path:"/logout",icon:"lock",isVisible:this.isLoggedIn}]}},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn},isUserAdmin:function(){return this.$store.getters.isLoggedUserAdmin},loggedUserName:function(){return this.$store.getters.loggedUserName},loggedUserId:function(){return this.$store.getters.loggedUserId},visibleMenuItems:function(){return this.menuItems.filter((function(e){return e.isVisible}))}},watch:{isLoggedIn:function(){this.menuItems=this.getMenuItems()}}}),c=u,l=n("2877"),d=n("6544"),m=n.n(d),p=n("40dc"),f=n("5bc1"),g=n("8336"),h=n("132d"),v=n("8860"),b=n("da13"),_=n("5d23"),y=n("34c3"),w=n("f774"),x=n("2fa4"),k=n("2a7f"),I=Object(l["a"])(c,o,i,!1,null,null,null),E=I.exports;m()(I,{VAppBar:p["a"],VAppBarNavIcon:f["a"],VBtn:g["a"],VIcon:h["a"],VList:v["a"],VListItem:b["a"],VListItemContent:_["a"],VListItemIcon:y["a"],VListItemTitle:_["b"],VNavigationDrawer:w["a"],VSpacer:x["a"],VToolbarItems:k["a"],VToolbarTitle:k["b"]});var U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-snackbar",{attrs:{"multi-line":"",right:"",bottom:"",timeout:6e3,color:e.variant},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.attrs;return[n("v-btn",e._b({attrs:{text:""},nativeOn:{click:function(t){e.show=!1}}},"v-btn",r,!1),[e._v(" Close ")])]}}]),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e._v(" "+e._s(e.message)+" ")])},A=[],O={name:"AppSnackbar",created:function(){var e=this;this.$store.subscribe((function(t,n){"UPDATE_SNACKBAR"===t.type&&(e.message=n.snackbar.message,e.variant=n.snackbar.variant,e.show=n.snackbar.show)}))},data:function(){return{show:!1,message:"",variant:""}}},S=O,T=n("2db4"),R=Object(l["a"])(S,U,A,!1,null,null,null),V=R.exports;m()(R,{VBtn:g["a"],VSnackbar:T["a"]});var L={name:"App",components:{TopNavBar:E,AppSnacbar:V},data:function(){return{isHydrated:!1}},computed:{breakpoint:function(){return this.isHydrated?this.$vuetify.breakpoint:{xs:!0,xsOnly:!0,xsAndUp:!1,sm:!0,smOnly:!0,smAndDown:!0,smAndUp:!1,md:!1,mdOnly:!1,mdAndDown:!1,mdAndUp:!1,lg:!1,lgOnly:!1,lgAndDown:!1,lgAndUp:!1,xl:!1,xlOnly:!1,xlAndDown:!1}}},mounted:function(){this.isHydrated=!0}},j=L,C=n("7496"),N=n("f6c4"),P=Object(l["a"])(j,a,s,!1,null,null,null),D=P.exports;m()(P,{VApp:C["a"],VMain:N["a"]});var H=n("8c4f"),$=(n("d3b7"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("page-header",{attrs:{msg:"Welcome to User Management"}}),n("v-card",{staticClass:"mx-auto mt-5",attrs:{width:"400","data-test-id":"landing-card"}},[n("v-card-title",[n("h2",{staticClass:"mx-auto display-1 blue--text text--darken-4"},[e._v("App Description")])]),n("v-card-text",[n("blockquote",{staticClass:"blockquote text-center"},[e._v(" It's a basic Single Page application "),n("br"),e._v(" with Google Firebase authentication ")])]),n("v-divider"),e.isLoggedIn?e._e():n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info",to:"/login","data-test-id":"login-button"}},[e._v("Login")])],1)],1),n("page-footer")],1)}),M=[],q=n("2579"),B=n("c633"),G={name:"Landing",components:{PageHeader:q["a"],PageFooter:B["a"]},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn}}},F=G,z=n("b0af"),J=n("99d9"),K=n("a523"),Y=n("ce7e"),Q=Object(l["a"])(F,$,M,!1,null,null,null),W=Q.exports;m()(Q,{VBtn:g["a"],VCard:z["a"],VCardActions:J["a"],VCardText:J["c"],VCardTitle:J["d"],VContainer:K["a"],VDivider:Y["a"],VSpacer:x["a"]});var Z=[{path:"/",name:"landing",component:W},{path:"/login",name:"login",component:function(){return Promise.all([n.e("chunk-24944874"),n.e("about")]).then(n.bind(null,"a55b"))},meta:{guest:!0}},{path:"/logout",name:"logout",component:function(){return n.e("chunk-2d215fa4").then(n.bind(null,"c100"))},meta:{requiresAuth:!0}},{path:"/dashboard",name:"dashboard",component:function(){return n.e("chunk-f933effe").then(n.bind(null,"7277"))},meta:{requiresAuth:!0,isAdmin:!0}},{path:"/profile/:id?",name:"profile",component:function(){return Promise.all([n.e("chunk-24944874"),n.e("chunk-35a491e0")]).then(n.bind(null,"7c87"))},meta:{requiresAuth:!0}},{path:"*",name:"notFound",component:function(){return n.e("chunk-2d0e5e97").then(n.bind(null,"9703"))},meta:{title:"404 (Page Not Found)"}}];r["a"].use(H["a"]);var X=new H["a"]({mode:"history",routes:Z}),ee=X,te=n("5530"),ne=n("2f62"),re=(n("99af"),n("4160"),n("159b"),n("96cf"),n("1da1")),ae=n("0b3b"),se=new ae["a"]({apiKey:"AIzaSyDYZf58JlUdckererSjy3z7tQk_xCxyFjk"}),oe=se,ie="https://us-central1-fb-task-management.cloudfunctions.net/msAuthApi";function ue(e){var t="root-user-email@firebase.com",n=e.email===t,r={id:e.uid,displayName:n?"root":e.displayName,email:e.email,role:n?"admin":e.role||"user",isActive:!0};return r}function ce(e){var t={};return e.displayName&&(t.displayName=e.displayName),e.email&&(t.email=e.email),e.role&&(t.role=e.role),e.password&&(t.password=e.password),t}var le={AUTH_LOGIN:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function n(){var r,a,s,o,i,u,c,l,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.email,a=t.password,s=null,n.prev=2,n.next=5,oe.signIn(r,a);case 5:return o=oe.user.localId,n.next=8,oe.authorizedRequest("".concat(ie,"/users/").concat(o));case 8:return i=n.sent,n.next=11,i.json();case 11:if(u=n.sent.user,s=ue(u),e.commit("AUTH_LOGIN",s),c=[],"user"!==s.role){n.next=19;break}c.push(s),n.next=27;break;case 19:return n.next=21,oe.authorizedRequest("".concat(ie,"/users"));case 21:return l=n.sent,console.log("resp.status",l.status),n.next=25,l.json();case 25:d=n.sent.users,d.forEach((function(e){c.push(ue(e))}));case 27:e.commit("GET_USERS",c),n.next=33;break;case 30:n.prev=30,n.t0=n["catch"](2),console.log("ERR",n.t0);case 33:return n.abrupt("return",s);case 34:case"end":return n.stop()}}),n,null,[[2,30]])})))()},AUTH_LOGOUT:function(e){return Object(re["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,oe.signOut();case 3:n("AUTH_LOGOUT"),n("GET_USERS",[]);case 5:case"end":return t.stop()}}),t)})))()},PATCH_USER:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function n(){var r,a,s,o,i,u,c,l,d,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=t.id,s=t.displayName,o=t.password,i=t.email,u=t.role,c=null,n.prev=3,n.next=6,oe.authorizedRequest("".concat(ie,"/users/").concat(a),{method:"PATCH",body:JSON.stringify(ce({displayName:s,password:o,email:i,role:u}))});case 6:return l=n.sent,n.next=9,l.json();case 9:d=n.sent,m=d.user,c=r("PATCH_USER",ue(m)),n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](3),console.log("ERR",n.t0);case 17:return n.abrupt("return",c);case 18:case"end":return n.stop()}}),n,null,[[3,14]])})))()},CREATE_USER:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function n(){var r,a,s,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=null,n.prev=2,n.next=5,oe.authorizedRequest("".concat(ie,"/users"),{method:"POST",body:JSON.stringify(t)});case 5:return s=n.sent,n.next=8,s.json();case 8:o=n.sent,i=o.uid,console.log("uid",i),a=r("CREATE_USER",Object(te["a"])({id:i},t)),n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](2),console.log("ERR",n.t0);case 17:return n.abrupt("return",a);case 18:case"end":return n.stop()}}),n,null,[[2,14]])})))()},DELETE_USER:function(e,t){return Object(re["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=t.userId,console.log("userId",a),n.prev=3,n.next=6,oe.authorizedRequest("".concat(ie,"/users/").concat(a),{method:"DELETE"});case 6:r("DELETE_USER",t),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](3),console.log("ERR",n.t0);case 12:case"end":return n.stop()}}),n,null,[[3,9]])})))()}},de=(n("c740"),n("a434"),{AUTH_LOGIN:function(e,t){e.loggedUser=t},AUTH_LOGOUT:function(e){e.loggedUser=null},GET_USERS:function(e,t){e.users=t},PATCH_USER:function(e,t){var n=t.id,r=t.displayName,a=t.email,s=t.password,o=t.role,i=e.users.findIndex((function(e){return e.id===n}));if(!(i>=0))throw new Error("User is not found.");var u=e.users[i];return u.displayName=r,u.email=a,u.role=o,s&&(u.password=s),e.users.findIndex((function(e){return e.id===n}))},CREATE_USER:function(e,t){return console.log("CREATE_USER",t),e.users.push(Object(te["a"])(Object(te["a"])({},t),{},{isActive:!0})),e.users.findIndex((function(e){return e.id===t.id}))},DELETE_USER:function(e,t){var n=t.userId,r=e.users.findIndex((function(e){return e.id===n}));if(!(r>=0))throw new Error("User is not found.");e.users.splice([r],1)},UPDATE_SNACKBAR:function(e,t){var n=t.message,r=t.variant,a=!1;n&&(a=!0),e.snackbar.variant=r,e.snackbar.message=n,e.snackbar.show=a}}),me={isLoggedIn:function(e){return!!e.loggedUser&&!!e.loggedUser.id},loggedUserEmail:function(e){return e.loggedUser?e.loggedUser.email:""},loggedUserName:function(e){return e.loggedUser?e.loggedUser.displayName:""},loggedUserId:function(e){return e.loggedUser?e.loggedUser.id:""},activeUsers:function(e){return e.users?e.users.filter((function(e){return!0===e.isActive})):[]},isLoggedUserAdmin:function(e){return!!e.loggedUser&&"admin"===e.loggedUser.role}};r["a"].use(ne["a"]);var pe=new ne["a"].Store({state:{loggedUser:null,users:null,snackbar:{show:!1,variant:"success",message:"Success! Admin role is added."}},mutations:Object(te["a"])({},de),actions:Object(te["a"])({},le),getters:Object(te["a"])({},me),modules:{}}),fe=n("f309");r["a"].use(fe["a"]);var ge=new fe["a"]({});r["a"].config.productionTip=!1,new r["a"]({router:ee,store:pe,vuetify:ge,render:function(e){return e(D)}}).$mount("#app")},c633:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-footer",{staticClass:"pa-4",attrs:{absolute:""}},[n("span",[e._v("© "+e._s((new Date).getFullYear())+" - "),n("strong",[e._v("Task Managemet")])])])},a=[],s={name:"PageFooter"},o=s,i=n("2877"),u=n("6544"),c=n.n(u),l=n("553a"),d=Object(i["a"])(o,r,a,!1,null,null,null);t["a"]=d.exports;c()(d,{VFooter:l["a"]})}});
//# sourceMappingURL=app.2ec5c830.js.map